import random 
import csv
def generar_csv_frutas(nombre_archivo, cantidad):
    tipo = random.choice("Organico", "Inorganico", "Peligroso", "Reciclable")
    match tipo:
        case "Organico":
            caso = random.choice(
        "Cáscaras de frutas",
        "Restos de comida",
        "Hojas secas",
        "Bolsas de té",
        "Pan duro",
        "Cáscaras de huevo"
            )
        case "Inorganico":
            caso = random.choice (
        "Escombros",
        "Cerámica rota",
        "Pañales desechables",
        "Colillas de cigarro",
        "Toallas sanitarias",
        "Servilletas sucias"
            )
        case "Peligroso":
            caso = random.choice( 
        "Pilas usadas",
        "Medicamentos vencidos",
        "Aerosoles vacíos",
        "Aceite de motor",
        "Disolventes químicos",
        "Lámparas fluorescentes"
            )
        case "Reciclable":
            caso = random.choice(
        "Botellas plásticas",
        "Latas de aluminio",
        "Cartón",
        "Papel limpio",
        "Vidrio",
        )
        case _:
            print("Paila")

    metodo_tratamiento = ("Reciclable", "Incineracion", "Compostaje", "Relleno sanitario ")
    peso = random.randint(1, 15)
    porcentaje = random.randint(1,100)

    with open(nombre_archivo, mode="w", newline="", encoding="utf-8") as archivo:
        escritor = csv.writer(archivo)
        escritor.writerow(["Residuo", "Tipo", "Metodo tratamiento", "Peso", "Porcentaje de recuperacion"])
        for i in range(cantidad):
            escritor.writerow([
                f"Fruta{i+1}",
                tipo,
                caso,
                random.choice(metodo_tratamiento),
                peso, 
                porcentaje
            ])

def cargar_frutas_desde_csv(nombre_archivo, gestor):
    with open(nombre_archivo, mode="r", encoding="utf-8") as archivo:
        lector = csv.DictReader(archivo)
        for fila in lector:
            try:
                fruta = Fruta(
                    fila["Residuo"],
                    fila["Tipo"],
                    fila[ "Metodo tratmiento"],
                    float(fila["Peso"]),
                    float(fila["Porcentaje de recuperacion"])
                )
                gestor.frutas.append(fruta)
            except Exception as e:
                print(f"Error en fila {fila}: {e}")

